image: node:latest

# This folder is cached between builds
cache:
  paths:
  - node_modules/
  
stages:
  - test
  
variables:
  DISPLAY: ':99.0'
  GOARCH="amd64 go build -ldflags -H=windowsgui"
  
before_script:
  - npm install
  - apt-get update -y
  - apt-get install -y xvfb zip wine
  - sudo nohup Xvfb $DISPLAY -ac &
  - sleep 7 # give xvfb some time to start



run1:
  stage: test
  script:
   - npm install
   - xvfb-run npm run build

    